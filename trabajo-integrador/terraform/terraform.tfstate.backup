{
  "version": 4,
  "terraform_version": "0.13.0",
  "serial": 82,
  "lineage": "d2252c01-a098-7bec-95e4-32541a4bf374",
  "outputs": {
    "dynamodb_table_name": {
      "value": "aiouti-terraform-locks",
      "type": "string"
    },
    "s3_bucket_arn": {
      "value": "arn:aws:s3:::aiouti-lf",
      "type": "string"
    }
  },
  "resources": [
    {
      "module": "module.lambda.module.events",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "f930e4c53bd091f2f453f90683c94b7dc9cd2def",
            "output_base64sha256": "+k7Rj50gW908JuGUTE7jWValBOaKjLtvHbXxgpAJw+c=",
            "output_md5": "94bc05728dbd3c90d43afbd5da133461",
            "output_path": "modules/lambda/lambda/functions/function.py.zip",
            "output_sha": "f930e4c53bd091f2f453f90683c94b7dc9cd2def",
            "output_size": 477,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "modules/lambda/lambda/functions/lambda_function.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "module": "module.measurements-crawler",
      "mode": "data",
      "type": "external",
      "name": "aws-glue-crawler",
      "provider": "provider[\"registry.terraform.io/hashicorp/external\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "-",
            "program": [
              "python",
              "modules/measurements-crawler/scripts/apply.py"
            ],
            "query": {
              "action_path": "modules/measurements-crawler/scripts/create.lock",
              "aws_region": "us-east-1",
              "crawler": "510421132032975207",
              "crawler_description": "Managed by TerraHub",
              "crawler_name": "aiouti-measurements-crawler",
              "crawler_role": "arn:aws:iam::622305974757:role/aiouti-glue-role",
              "data_source_path": "s3://aiouti-lf/lakeformation/measurements/raw",
              "database_name": "aiouti-db",
              "schedule": "cron(0/10 * ? * * *)",
              "table_prefix": ""
            },
            "result": {
              "Action": "Not Created"
            },
            "working_dir": null
          }
        }
      ]
    },
    {
      "module": "module.glue-crawlers",
      "mode": "data",
      "type": "external",
      "name": "aws-glue-crawler",
      "provider": "provider[\"registry.terraform.io/hashicorp/external\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "-",
            "program": [
              "python",
              "modules/glue-crawlers/scripts/apply.py"
            ],
            "query": {
              "action_path": "modules/glue-crawlers/scripts/create.lock",
              "aws_region": "us-east-1",
              "crawler": "8693035292469896660",
              "crawler_description": "Managed by TerraHub",
              "crawler_name": "aiouti-crawler",
              "crawler_role": "arn:aws:iam::622305974757:role/aiouti-glue-role",
              "data_source_path": "s3://aiouti-lf/lakeformation",
              "database_name": "aiouti-db",
              "schedule": "cron(0/10 * ? * MON-FRI *)",
              "table_prefix": ""
            },
            "result": {
              "Action": "Not Created"
            },
            "working_dir": null
          }
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "data",
      "type": "template_file",
      "name": "tf_api_assume_role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "412b16482ce618ec01c9b6ccbb3bbce98843dfe75dd685f0a7c4aae16b3d1f01",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"apigateway.amazonaws.com\",\n          \"lambda.amazonaws.com\"\n        ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"apigateway.amazonaws.com\",\n          \"lambda.amazonaws.com\"\n        ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n",
            "vars": null
          }
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "data",
      "type": "template_file",
      "name": "tf_iot_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "1fbe766a4f26832d918adce77eaea98ff19e0c430532d8cd21dd541ec7873ca3",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iot:Connect\",\n        \"iot:Publish\",\n        \"iot:Receive\",\n        \"iot:Subscribe\"\n      ],\n      \"Resource\": \"arn:aws:iot:us-east-1:622305974757:*\"\n    }\n  ]\n}\n",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iot:Connect\",\n        \"iot:Publish\",\n        \"iot:Receive\",\n        \"iot:Subscribe\"\n      ],\n      \"Resource\": \"arn:aws:iot:${aws_region}:${aws_account_id}:*\"\n    }\n  ]\n}\n",
            "vars": {
              "aws_account_id": "622305974757",
              "aws_region": "us-east-1"
            }
          }
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "data",
      "type": "template_file",
      "name": "tf_lambda_assume_role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "a0eec41d0bbb9e67dd30de41db2ef0936563de5a779333dc2d0952d8570122b8",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"lambda.amazonaws.com\"\n        ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": [\n          \"lambda.amazonaws.com\"\n        ]\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n",
            "vars": null
          }
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "data",
      "type": "template_file",
      "name": "tf_log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "73b77a63fedd9670bf45abd9ced9b598eeb2659c35c2f9e9d16ff0d865af63f4",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": {\n    \"Effect\": \"Allow\",\n    \"Action\": [\n      \"logs:CreateLogGroup\",\n      \"logs:CreateLogStream\",\n      \"logs:DescribeLogGroups\",\n      \"logs:DescribeLogStreams\",\n      \"logs:PutLogEvents\",\n      \"logs:GetLogEvents\",\n      \"logs:FilterLogEvents\"\n    ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n  }\n}\n",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": {\n    \"Effect\": \"Allow\",\n    \"Action\": [\n      \"logs:CreateLogGroup\",\n      \"logs:CreateLogStream\",\n      \"logs:DescribeLogGroups\",\n      \"logs:DescribeLogStreams\",\n      \"logs:PutLogEvents\",\n      \"logs:GetLogEvents\",\n      \"logs:FilterLogEvents\"\n    ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n  }\n}\n",
            "vars": null
          }
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_autoscaling_group",
      "name": "aiouti_ecs",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:us-east-1:622305974757:autoScalingGroup:ccd983f0-7567-4334-8146-ebae3190db17:autoScalingGroupName/aiouti-ecs-asg",
            "availability_zones": [
              "us-east-1a",
              "us-east-1b",
              "us-east-1c"
            ],
            "default_cooldown": 300,
            "desired_capacity": 5,
            "enabled_metrics": [],
            "force_delete": false,
            "health_check_grace_period": 300,
            "health_check_type": "EC2",
            "id": "aiouti-ecs-asg",
            "initial_lifecycle_hook": [],
            "launch_configuration": "aiouti_ecs",
            "launch_template": [],
            "load_balancers": [],
            "max_instance_lifetime": 0,
            "max_size": 10,
            "metrics_granularity": "1Minute",
            "min_elb_capacity": null,
            "min_size": 3,
            "mixed_instances_policy": [],
            "name": "aiouti-ecs-asg",
            "name_prefix": null,
            "placement_group": "",
            "protect_from_scale_in": false,
            "service_linked_role_arn": "arn:aws:iam::622305974757:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling",
            "suspended_processes": [],
            "tag": [],
            "tags": null,
            "target_group_arns": [],
            "termination_policies": [],
            "timeouts": null,
            "vpc_zone_identifier": [],
            "wait_for_capacity_timeout": "10m",
            "wait_for_elb_capacity": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.ecs-cluster.aws_iam_instance_profile.aiouti_ecs",
            "module.ecs-cluster.aws_key_pair.aiouti_ecs",
            "module.ecs-cluster.aws_launch_configuration.aiouti_ecs",
            "module.ecs-cluster.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "aiouti-device",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:622305974757:log-group:aiouti-device:*",
            "id": "aiouti-device",
            "kms_key_id": "",
            "name": "aiouti-device",
            "name_prefix": null,
            "retention_in_days": 1,
            "tags": {}
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "terraform_locks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:622305974757:table/aiouti-terraform-locks",
            "attribute": [
              {
                "name": "LockID",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "global_secondary_index": [],
            "hash_key": "LockID",
            "id": "aiouti-terraform-locks",
            "local_secondary_index": [],
            "name": "aiouti-terraform-locks",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 0,
            "replica": [],
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "tags": {},
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "aiouti_default",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:us-east-1:622305974757:cluster/aiouti-cluster",
            "capacity_providers": [],
            "default_capacity_provider_strategy": [],
            "id": "arn:aws:ecs:us-east-1:622305974757:cluster/aiouti-cluster",
            "name": "aiouti-cluster",
            "setting": [
              {
                "name": "containerInsights",
                "value": "disabled"
              }
            ],
            "tags": {}
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_ecs_service",
      "name": "aiouti_device_service",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "capacity_provider_strategy": [],
            "cluster": "arn:aws:ecs:us-east-1:622305974757:cluster/aiouti-cluster",
            "deployment_controller": [
              {
                "type": "ECS"
              }
            ],
            "deployment_maximum_percent": 200,
            "deployment_minimum_healthy_percent": 100,
            "desired_count": 1,
            "enable_ecs_managed_tags": false,
            "force_new_deployment": null,
            "health_check_grace_period_seconds": 0,
            "iam_role": null,
            "id": "arn:aws:ecs:us-east-1:622305974757:service/aiouti-device",
            "launch_type": "EC2",
            "load_balancer": [],
            "name": "aiouti-device",
            "network_configuration": [],
            "ordered_placement_strategy": [],
            "placement_constraints": [],
            "placement_strategy": [],
            "platform_version": "",
            "propagate_tags": "NONE",
            "scheduling_strategy": "REPLICA",
            "service_registries": [],
            "tags": {},
            "task_definition": "arn:aws:ecs:us-east-1:622305974757:task-definition/aiouti_device:10",
            "timeouts": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.ecs-cluster.aws_ecs_cluster.aiouti_default",
            "module.ecs-cluster.aws_ecs_task_definition.aiouti_device",
            "module.ecs-cluster.aws_iam_role_policy.aiouti_ecs_service_role_policy"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "aiouti_device",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:us-east-1:622305974757:task-definition/aiouti_device:10",
            "container_definitions": "[{\"cpu\":1024,\"entryPoint\":[],\"environment\":[{\"name\":\"IOT_URI\",\"value\":\"\"}],\"essential\":true,\"image\":\"pablojulianperalta/aiouti-device:1.8\",\"links\":[],\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"aiouti-device\",\"awslogs-region\":\"us-east-1\",\"awslogs-stream-prefix\":\"aiouti-ecs\"}},\"memory\":512,\"mountPoints\":[{\"containerPath\":\"/usr/src/app/cert\",\"readOnly\":true,\"sourceVolume\":\"certificatesvol\"}],\"name\":\"device\",\"portMappings\":[],\"volumesFrom\":[]}]",
            "cpu": "",
            "execution_role_arn": "",
            "family": "aiouti_device",
            "id": "aiouti_device",
            "inference_accelerator": [],
            "ipc_mode": "",
            "memory": "",
            "network_mode": "",
            "pid_mode": "",
            "placement_constraints": [],
            "proxy_configuration": [],
            "requires_compatibilities": [],
            "revision": 10,
            "tags": {},
            "task_role_arn": "",
            "volume": [
              {
                "docker_volume_configuration": [],
                "efs_volume_configuration": [],
                "host_path": "/home/ec2-user/cert",
                "name": "certificatesvol"
              }
            ]
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ecs-cluster.template_file.registry_task"
          ]
        }
      ]
    },
    {
      "module": "module.glue-jobs",
      "mode": "managed",
      "type": "aws_glue_job",
      "name": "example",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocated_capacity": 10,
            "arn": "arn:aws:glue:us-east-1:622305974757:job/aiouti-job-lf",
            "command": [
              {
                "name": "glueetl",
                "python_version": "2",
                "script_location": "s3://aiouti-lf/lakeformation/measurements/job/aiuoti/aiuoti"
              }
            ],
            "connections": [],
            "default_arguments": {},
            "description": "",
            "execution_property": [
              {
                "max_concurrent_runs": 1
              }
            ],
            "glue_version": "",
            "id": "aiouti-job-lf",
            "max_capacity": 10,
            "max_retries": 0,
            "name": "aiouti-job-lf",
            "notification_property": [],
            "number_of_workers": 0,
            "role_arn": "arn:aws:iam::622305974757:role/aiouti-lf-stack-CFNGlueServiceMLLabRole-6Q9PXU7FSXLM",
            "security_configuration": "",
            "tags": {},
            "timeout": 2880,
            "worker_type": ""
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "aiouti_ecs",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::622305974757:instance-profile/aiouti-ecs-instance-profile",
            "create_date": "2020-08-18T17:12:10Z",
            "id": "aiouti-ecs-instance-profile",
            "name": "aiouti-ecs-instance-profile",
            "name_prefix": null,
            "path": "/",
            "role": "aiouti_ecs_role",
            "roles": [
              "aiouti_ecs_role"
            ],
            "unique_id": "AIPAZBZCTTHSQ3MSAVXPF"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iam_role.aiouti_ecs_role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "aiouti_device_policy",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::622305974757:policy/aiouti-certs-policy",
            "description": "Provides de test devices access to the certs",
            "id": "arn:aws:iam::622305974757:policy/aiouti-certs-policy",
            "name": "aiouti-certs-policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::aiouti-lf/certs*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\",\n        \"logs:GetLogEvents\",\n        \"logs:FilterLogEvents\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}\n"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.template_file.ecs_service_role_policy"
          ]
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::622305974757:policy/aiouti-log",
            "description": "",
            "id": "arn:aws:iam::622305974757:policy/aiouti-log",
            "name": "aiouti-log",
            "name_prefix": null,
            "path": "/",
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": {\n    \"Effect\": \"Allow\",\n    \"Action\": [\n      \"logs:CreateLogGroup\",\n      \"logs:CreateLogStream\",\n      \"logs:DescribeLogGroups\",\n      \"logs:DescribeLogStreams\",\n      \"logs:PutLogEvents\",\n      \"logs:GetLogEvents\",\n      \"logs:FilterLogEvents\"\n    ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n  }\n}\n"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda.data.template_file.tf_log_policy"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "aiouti_ecs_role",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::622305974757:role/aiouti_ecs_role",
            "assume_role_policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"ec2.amazonaws.com\",\"ecs.amazonaws.com\"]},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-08-18T16:58:01Z",
            "description": "",
            "force_detach_policies": false,
            "id": "aiouti_ecs_role",
            "max_session_duration": 3600,
            "name": "aiouti_ecs_role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROAZBZCTTHSQFXIB7AKD"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_basic_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::622305974757:role/service-role/aiouti-lambda_basic_execution",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-08-18T16:58:06Z",
            "description": "",
            "force_detach_policies": false,
            "id": "aiouti-lambda_basic_execution",
            "max_session_duration": 3600,
            "name": "aiouti-lambda_basic_execution",
            "name_prefix": null,
            "path": "/service-role/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROAZBZCTTHSXLZKSJXZ5"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda.data.template_file.tf_lambda_assume_role_policy"
          ]
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "s3_access_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::622305974757:role/service-role/aiouti-s3-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Id\":\"aiouti-bucket-policy\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"s3.amazonaws.com\",\"lambda.amazonaws.com\"]},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-08-18T16:58:12Z",
            "description": "",
            "force_detach_policies": false,
            "id": "aiouti-s3-role",
            "max_session_duration": 3600,
            "name": "aiouti-s3-role",
            "name_prefix": null,
            "path": "/service-role/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROAZBZCTTHSRVDT7PFLO"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "aiouti_ecs_instance_role_policy",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "aiouti_ecs_role:ecs_instance_role_policy",
            "name": "ecs_instance_role_policy",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ecs:CreateCluster\",\n        \"ecs:DeregisterContainerInstance\",\n        \"ecs:DiscoverPollEndpoint\",\n        \"ecs:Poll\",\n        \"ecs:RegisterContainerInstance\",\n        \"ecs:StartTelemetrySession\",\n        \"ecs:Submit*\",\n        \"ecs:StartTask\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n",
            "role": "aiouti_ecs_role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iam_role.aiouti_ecs_role"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "aiouti_ecs_service_role_policy",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "aiouti_ecs_role:ecs_service_role_policy",
            "name": "ecs_service_role_policy",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::aiouti-lf/certs*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\",\n        \"logs:GetLogEvents\",\n        \"logs:FilterLogEvents\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}\n",
            "role": "aiouti_ecs_role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iam_role.aiouti_ecs_role",
            "module.ecs-cluster.template_file.ecs_service_role_policy"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_device_certs",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "aiouti_ecs_role-20200818165814668300000002",
            "policy_arn": "arn:aws:iam::622305974757:policy/aiouti-certs-policy",
            "role": "aiouti_ecs_role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iam_policy.aiouti_device_policy",
            "module.ecs-cluster.aws_iam_role.aiouti_ecs_role",
            "module.ecs-cluster.template_file.ecs_service_role_policy"
          ]
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_basic_execution_log_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "aiouti-lambda_basic_execution-20200818165814305900000001",
            "policy_arn": "arn:aws:iam::622305974757:policy/aiouti-log",
            "role": "aiouti-lambda_basic_execution"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda.aws_iam_policy.log_policy",
            "module.lambda.aws_iam_role.lambda_basic_execution_role",
            "module.lambda.data.template_file.tf_lambda_assume_role_policy",
            "module.lambda.data.template_file.tf_log_policy"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_certificate",
      "name": "cert",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "active": true,
            "arn": "arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "certificate_pem": "-----BEGIN CERTIFICATE-----\nMIIDWTCCAkGgAwIBAgIUID2SJ8q6kar/lLvQ+N9H5VJ+MkgwDQYJKoZIhvcNAQEL\nBQAwTTFLMEkGA1UECwxCQW1hem9uIFdlYiBTZXJ2aWNlcyBPPUFtYXpvbi5jb20g\nSW5jLiBMPVNlYXR0bGUgU1Q9V2FzaGluZ3RvbiBDPVVTMB4XDTIwMDgxODE2NDAx\nM1oXDTQ5MTIzMTIzNTk1OVowHjEcMBoGA1UEAwwTQVdTIElvVCBDZXJ0aWZpY2F0\nZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALFfh1yo8floTNQpAskG\nykEec8kjtNcQz6O5zzFAoMgLNBQDtCdY6wvvVW9E1HX475djfMsiWdwr9tyX8SXE\nfGuq4OidXgXIOa5oF8h1GYNfkgsnw4/DULOn9jFXFBJeZHdINmtSvYy2/I8pAC0v\n9x8yN0eLIJdFOOG9wrwv40ql2KcfS/Qf1lkg7WmHvKQaOuzFrysAm7Vrgp3H/bcb\n85w55C9P5wBVW1Jyyv8I03WAB+szUnHYKBg/u993cSwhDfG3cxiLY39xIi+I/Qk8\nMDGcL4WlykNmAK3jR95IGV2/litUkYoe8NV83en90FGpoM3dLHd4IjeX5FxZ/c+8\nPK8CAwEAAaNgMF4wHwYDVR0jBBgwFoAUVIR8IPUxDgSqKKX5+s0uAvbMeE4wHQYD\nVR0OBBYEFIK2T/zFzAweoLKvS+52mWAwRM7dMAwGA1UdEwEB/wQCMAAwDgYDVR0P\nAQH/BAQDAgeAMA0GCSqGSIb3DQEBCwUAA4IBAQCbUJa55OeIn/y8gQWNTpUQTO9+\nTEXo8ZCqe29xRKKhbghL2BLDee1fYa1hNjqa8LcKfaVOD+Uj0aWBIK/bqM0H1I82\ns4RluFta561fsCayP8gqokAd45yfBA/IVtAzhxStYQAmdQCQbVqvgrOepS4b4A5Q\nt+5k5DyHvc/++oJB+NO0/ZTKceBok7Ggj/U9ijWm40bf6qsMRjAMWI7MX35fY6xp\ncfPnFlXWgRjcIJ2hLAZDUkCnOOf2JDZRwq0XXwwh9HEXyKQMuXjeQI40EMIcWiNc\nj4Wp0oLJdjD2i60C62XDHA90CKHeBVkmkvDno7wv/DBsuZ8SNehGGxiE4/iB\n-----END CERTIFICATE-----\n",
            "csr": null,
            "id": "cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAsV+HXKjx+WhM1CkCyQbKQR5zySO01xDPo7nPMUCgyAs0FAO0\nJ1jrC+9Vb0TUdfjvl2N8yyJZ3Cv23JfxJcR8a6rg6J1eBcg5rmgXyHUZg1+SCyfD\nj8NQs6f2MVcUEl5kd0g2a1K9jLb8jykALS/3HzI3R4sgl0U44b3CvC/jSqXYpx9L\n9B/WWSDtaYe8pBo67MWvKwCbtWuCncf9txvznDnkL0/nAFVbUnLK/wjTdYAH6zNS\ncdgoGD+733dxLCEN8bdzGItjf3EiL4j9CTwwMZwvhaXKQ2YAreNH3kgZXb+WK1SR\nih7w1Xzd6f3QUamgzd0sd3giN5fkXFn9z7w8rwIDAQABAoIBAQCv1fzx3cXrsvsf\nA/zv3pxYi+DK0GvxHIhLTeNZdzEsvvaEtNs+eoag0UWHxds9jGewU38ePVKJ0seq\nDbKQ90VE0ySdVYwk/UY5YJXbMkL1mqPEDUpwVXbGc0a7yRBr2UmNengAUwj321tq\nbIHxSfCY64YjlYfcjlICb8UCHBMeJr6B5xCZpMtGlCAYHyuLZlhDllR2czOd2PQ9\ndOeP4ws3KzS70pvP74P+P+VPQq63KNjPszC7rF+GoBWbYxGdqm+pOeGLO4FnKdIY\n3RHLLtHO2MD60e3iGSKghJtJSl9xdqggXM6E6lqvF1/Q2jcYVPw+DDLcJqqMu/sM\nRWIoothBAoGBANtYG+Jczv/X37aPv/3486MJ5BbKRAnR8B5/v2eEnmlnT2FFvfHm\nMOJK7k8jGLgt7I8lWV4haBPaF/mSn5nqWrHnD+TmtLAyliIx51FC5Y9ijQefygGc\nhpTpq2qt//LJrLtAD+Np3em6iHiTrl200ZrQSc5QU8PnU3bK4ifHIOqPAoGBAM8D\n1VQE0/8UwH8WhwapCAJ8DD3ITUlYw5Trtv52oduK2Wsm6nyLlWY3FPFAynz8ItJM\nl2FuQACPkHT1EcKJJWItlWAow41A61bre04ktQblgEyquOWuI37QwWYAZ3Mq3r7q\nOW9WdzmLOP5dA0LsrMGWCZsf1ahHsOcKQe84XxvhAoGAJP/s3DdJl7CjhRkkisPm\n3Ta66fk+luV5+rsT33NogWEy67am/toUnueC4YiLD+53PAJR2+YIt2iPqMLJ912n\n5OCUNsmP6zTtTGFcosGFFbXLEmEq4zCzJwVvq/Qj+6F3aLK6u2LNUzLq+GP5AseQ\nn+vIt2unZaFs29oHYixd6hMCgYEAkB1jDbKuww13VQIhzgkugkxJWVlwNHeO8MWI\nB24fD++BnI7i/wFNaHNAKROp44jD1RNs728JL1rCfil9y6geVlLVgrPeLx/athAJ\nL0VuoPZ0cusG/R5Vp5s8h/4QBqT5nH8CrPfM2EqLysiF1LlfKwWAenWXECeYh78k\nV50u2QECgYEAy4a48XYDFY4UTJz2WIrpVYLDMS73l37SUDxXeb1B+WquG3RyXMcM\nlS2EjRH182LK/zGheh6anArGL6zyknq0Lb/+kk9riaMkUTjZcnez7lzy9+3NFyAN\nve49VUP5vOd2emlYZiDsoPKXFmlRuOc+rCkgrJcydvF9obF4DXgyC+A=\n-----END RSA PRIVATE KEY-----\n",
            "public_key": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsV+HXKjx+WhM1CkCyQbK\nQR5zySO01xDPo7nPMUCgyAs0FAO0J1jrC+9Vb0TUdfjvl2N8yyJZ3Cv23JfxJcR8\na6rg6J1eBcg5rmgXyHUZg1+SCyfDj8NQs6f2MVcUEl5kd0g2a1K9jLb8jykALS/3\nHzI3R4sgl0U44b3CvC/jSqXYpx9L9B/WWSDtaYe8pBo67MWvKwCbtWuCncf9txvz\nnDnkL0/nAFVbUnLK/wjTdYAH6zNScdgoGD+733dxLCEN8bdzGItjf3EiL4j9CTww\nMZwvhaXKQ2YAreNH3kgZXb+WK1SRih7w1Xzd6f3QUamgzd0sd3giN5fkXFn9z7w8\nrwIDAQAB\n-----END PUBLIC KEY-----\n"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_policy",
      "name": "iot_policy",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iot:us-east-1:622305974757:policy/aiouti-thing",
            "default_version_id": "1",
            "id": "aiouti-thing",
            "name": "aiouti-thing",
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iot:Connect\",\n        \"iot:Publish\",\n        \"iot:Receive\",\n        \"iot:Subscribe\"\n      ],\n      \"Resource\": \"arn:aws:iot:us-east-1:622305974757:*\"\n    }\n  ]\n}\n"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.data.template_file.tf_iot_policy"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_policy_attachment",
      "name": "att-policy",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "aiouti-thing|arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "policy": "aiouti-thing",
            "target": "arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert",
            "module.ecs-cluster.aws_iot_policy.iot_policy",
            "module.ecs-cluster.data.template_file.tf_iot_policy"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_thing",
      "name": "thing",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iot:us-east-1:622305974757:thing/aiouti-thing-0",
            "attributes": {
              "First": "aiouti-thing-0-"
            },
            "default_client_id": "aiouti-thing-0",
            "id": "aiouti-thing-0",
            "name": "aiouti-thing-0",
            "thing_type_name": "FS-15",
            "version": 1
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_thing_type.fs-type"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iot:us-east-1:622305974757:thing/aiouti-thing-1",
            "attributes": {
              "First": "aiouti-thing-1-"
            },
            "default_client_id": "aiouti-thing-1",
            "id": "aiouti-thing-1",
            "name": "aiouti-thing-1",
            "thing_type_name": "FS-15",
            "version": 1
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_thing_type.fs-type"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iot:us-east-1:622305974757:thing/aiouti-thing-2",
            "attributes": {
              "First": "aiouti-thing-2-"
            },
            "default_client_id": "aiouti-thing-2",
            "id": "aiouti-thing-2",
            "name": "aiouti-thing-2",
            "thing_type_name": "FS-15",
            "version": 1
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_thing_type.fs-type"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_thing_principal_attachment",
      "name": "att-thing",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "aiouti-thing-0|arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "principal": "arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "thing": "aiouti-thing-0"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert",
            "module.ecs-cluster.aws_iot_thing.thing",
            "module.ecs-cluster.aws_iot_thing_type.fs-type"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "id": "aiouti-thing-1|arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "principal": "arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "thing": "aiouti-thing-1"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert",
            "module.ecs-cluster.aws_iot_thing.thing",
            "module.ecs-cluster.aws_iot_thing_type.fs-type"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "id": "aiouti-thing-2|arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "principal": "arn:aws:iot:us-east-1:622305974757:cert/cdd81094e7ad8551b2d34cc00a2bf5a5b556cda47360c1fcf5c191551e87568c",
            "thing": "aiouti-thing-2"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert",
            "module.ecs-cluster.aws_iot_thing.thing",
            "module.ecs-cluster.aws_iot_thing_type.fs-type"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_thing_type",
      "name": "fs-type",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iot:us-east-1:622305974757:thingtype/FS-15",
            "deprecated": false,
            "id": "FS-15",
            "name": "FS-15",
            "properties": [
              {
                "description": "",
                "searchable_attributes": []
              }
            ]
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_thing_type",
      "name": "lf-type",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iot:us-east-1:622305974757:thingtype/LF-10",
            "deprecated": false,
            "id": "LF-10",
            "name": "LF-10",
            "properties": [
              {
                "description": "",
                "searchable_attributes": []
              }
            ]
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_iot_thing_type",
      "name": "pp-type",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iot:us-east-1:622305974757:thingtype/PP-5",
            "deprecated": false,
            "id": "PP-5",
            "name": "PP-5",
            "properties": [
              {
                "description": "",
                "searchable_attributes": []
              }
            ]
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_key_pair",
      "name": "aiouti_ecs",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:622305974757:key-pair/aiouti-key-pair-terraform",
            "fingerprint": "0a:fc:08:ee:05:9b:ae:61:92:88:e1:73:bb:24:34:d2",
            "id": "aiouti-key-pair-terraform",
            "key_name": "aiouti-key-pair-terraform",
            "key_name_prefix": null,
            "key_pair_id": "key-0e2b6c13cb70a9d3c",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDvlmOdNZVofPKRITVCgufWIfF59gVSwzYYaDnr7g82eu7iKDNxri5x/SH+2fc1/ouQ/ht5Nx+gX+JxkPU2PK2NPZ84wVrzAyRkhtWF7uELNfqix5PSqX+wZY2sAqr5jc3xjLZWwcqRIoqDg0WPqPclZlhucBJ7IQWEfOPPfoAZFGXVtFIza8VldaugmuCxzLt6Pq5+frvXBU1abkRWVtzkY3XZkRCj0gQDRIXxCCb0nM4rEYqu9tkDTn7GzwN7NiG2CZlLKFzr7RVosgqvV5MVdk8burZebq9oYYalCZ4wSkF65nuEKh+T6jqtDoQyQoU12S0z8s5trNuaVwfsMBMD",
            "tags": {}
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.lambda.module.events",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_function",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:622305974757:function:aiouti-events",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "file_system_config": [],
            "filename": "modules/lambda/lambda/functions/function.py.zip",
            "function_name": "aiouti-events",
            "handler": "lambda_function.lambda_handler",
            "id": "aiouti-events",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:622305974757:function:aiouti-events/invocations",
            "kms_key_arn": "",
            "last_modified": "2020-08-18T17:08:32.351+0000",
            "layers": [],
            "memory_size": 256,
            "publish": true,
            "qualified_arn": "arn:aws:lambda:us-east-1:622305974757:function:aiouti-events:2",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::622305974757:role/service-role/aiouti-s3-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "+k7Rj50gW908JuGUTE7jWValBOaKjLtvHbXxgpAJw+c=",
            "source_code_size": 477,
            "tags": {},
            "timeout": 60,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "2",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.lambda.aws_iam_role.s3_access_role",
            "module.lambda.module.events.data.archive_file.lambda_archive"
          ]
        }
      ]
    },
    {
      "module": "module.lambda.module.events",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "lambda_permission",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "aiouti-events",
            "id": "aiouti-events",
            "principal": "apigateway.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": null,
            "statement_id": "aiouti-events",
            "statement_id_prefix": null
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda.aws_iam_role.s3_access_role",
            "module.lambda.module.events.aws_lambda_function.lambda_function",
            "module.lambda.module.events.data.archive_file.lambda_archive"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_launch_configuration",
      "name": "aiouti_ecs",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:us-east-1:622305974757:launchConfiguration:48e62272-42ac-4e4d-9005-458366d8b928:launchConfigurationName/aiouti_ecs",
            "associate_public_ip_address": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_monitoring": true,
            "ephemeral_block_device": [],
            "iam_instance_profile": "aiouti-ecs-instance-profile",
            "id": "aiouti_ecs",
            "image_id": "ami-02cfc1ae415add4ce",
            "instance_type": "t2.micro",
            "key_name": "aiouti-key-pair-terraform",
            "name": "aiouti_ecs",
            "name_prefix": null,
            "placement_tenancy": null,
            "root_block_device": [],
            "security_groups": [],
            "spot_price": "",
            "user_data": "9a9950720dfdcf309bc40f7320476d35c117323a",
            "user_data_base64": null,
            "vpc_classic_link_id": "",
            "vpc_classic_link_security_groups": []
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iam_instance_profile.aiouti_ecs",
            "module.ecs-cluster.aws_key_pair.aiouti_ecs",
            "module.ecs-cluster.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.lambda",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::aiouti-lf",
            "bucket": "aiouti-lf",
            "bucket_domain_name": "aiouti-lf.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "aiouti-lf.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "aiouti-lf",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [],
            "tags": {},
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "terraform_state",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::aiouti-lf",
            "bucket": "aiouti-lf",
            "bucket_domain_name": "aiouti-lf.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "aiouti-lf.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "aiouti-lf",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ]
                  }
                ]
              }
            ],
            "tags": {},
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_s3_bucket_object",
      "name": "s3_cert_private_key",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "aiouti-lf",
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "binary/octet-stream",
            "etag": "8d1f750c08de1df89ee3fc75a6f139c2",
            "force_destroy": false,
            "id": "certs/certificate.private.key",
            "key": "certs/certificate.private.key",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "server_side_encryption": "AES256",
            "source": "modules/ecs-cluster/tmp/certs/certificate.private.key",
            "storage_class": "STANDARD",
            "tags": {},
            "version_id": "jV0RdjVR5R8gBkq4Y3eyXLamfVt9Vdlc",
            "website_redirect": ""
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert",
            "module.ecs-cluster.local_file.cert_private_key"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_s3_bucket_object",
      "name": "s3_cert_public_key",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "aiouti-lf",
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "binary/octet-stream",
            "etag": "14ecf7afa8dccdf9d7cf34d780be32db",
            "force_destroy": false,
            "id": "certs/certificate.public.key",
            "key": "certs/certificate.public.key",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "server_side_encryption": "AES256",
            "source": "modules/ecs-cluster/tmp/certs/certificate.public.key",
            "storage_class": "STANDARD",
            "tags": {},
            "version_id": "HH2hcpqHz.iWvOQ4yD2yZTBWjMwrarqc",
            "website_redirect": ""
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert",
            "module.ecs-cluster.local_file.cert_public_key"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_s3_bucket_object",
      "name": "s3_certs_folder",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "aiouti-lf",
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "binary/octet-stream",
            "etag": "d41d8cd98f00b204e9800998ecf8427e",
            "force_destroy": false,
            "id": "certs/",
            "key": "certs/",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "server_side_encryption": "",
            "source": null,
            "storage_class": "STANDARD",
            "tags": {},
            "version_id": "null",
            "website_redirect": ""
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "aws_s3_bucket_object",
      "name": "s3_iot_cert_pem",
      "provider": "module.ecs-cluster.provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "aiouti-lf",
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "binary/octet-stream",
            "etag": "dbaf0178a0bfd26d4aea9012a3da797e",
            "force_destroy": false,
            "id": "certs/certificate.cert.pem",
            "key": "certs/certificate.cert.pem",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "server_side_encryption": "AES256",
            "source": "modules/ecs-cluster/tmp/certs/certificate.cert.pem",
            "storage_class": "STANDARD",
            "tags": {},
            "version_id": "MHV.YAzCvp6hRsK7TEGtrZQ7BRBhg0wQ",
            "website_redirect": ""
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert",
            "module.ecs-cluster.local_file.iot_cert_pem"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "local_file",
      "name": "cert_private_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": null,
            "content_base64": null,
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "modules/ecs-cluster/tmp/certs/certificate.private.key",
            "id": "85449dc65776e71cdfb1e6f86f8e465b56770260",
            "sensitive_content": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAsV+HXKjx+WhM1CkCyQbKQR5zySO01xDPo7nPMUCgyAs0FAO0\nJ1jrC+9Vb0TUdfjvl2N8yyJZ3Cv23JfxJcR8a6rg6J1eBcg5rmgXyHUZg1+SCyfD\nj8NQs6f2MVcUEl5kd0g2a1K9jLb8jykALS/3HzI3R4sgl0U44b3CvC/jSqXYpx9L\n9B/WWSDtaYe8pBo67MWvKwCbtWuCncf9txvznDnkL0/nAFVbUnLK/wjTdYAH6zNS\ncdgoGD+733dxLCEN8bdzGItjf3EiL4j9CTwwMZwvhaXKQ2YAreNH3kgZXb+WK1SR\nih7w1Xzd6f3QUamgzd0sd3giN5fkXFn9z7w8rwIDAQABAoIBAQCv1fzx3cXrsvsf\nA/zv3pxYi+DK0GvxHIhLTeNZdzEsvvaEtNs+eoag0UWHxds9jGewU38ePVKJ0seq\nDbKQ90VE0ySdVYwk/UY5YJXbMkL1mqPEDUpwVXbGc0a7yRBr2UmNengAUwj321tq\nbIHxSfCY64YjlYfcjlICb8UCHBMeJr6B5xCZpMtGlCAYHyuLZlhDllR2czOd2PQ9\ndOeP4ws3KzS70pvP74P+P+VPQq63KNjPszC7rF+GoBWbYxGdqm+pOeGLO4FnKdIY\n3RHLLtHO2MD60e3iGSKghJtJSl9xdqggXM6E6lqvF1/Q2jcYVPw+DDLcJqqMu/sM\nRWIoothBAoGBANtYG+Jczv/X37aPv/3486MJ5BbKRAnR8B5/v2eEnmlnT2FFvfHm\nMOJK7k8jGLgt7I8lWV4haBPaF/mSn5nqWrHnD+TmtLAyliIx51FC5Y9ijQefygGc\nhpTpq2qt//LJrLtAD+Np3em6iHiTrl200ZrQSc5QU8PnU3bK4ifHIOqPAoGBAM8D\n1VQE0/8UwH8WhwapCAJ8DD3ITUlYw5Trtv52oduK2Wsm6nyLlWY3FPFAynz8ItJM\nl2FuQACPkHT1EcKJJWItlWAow41A61bre04ktQblgEyquOWuI37QwWYAZ3Mq3r7q\nOW9WdzmLOP5dA0LsrMGWCZsf1ahHsOcKQe84XxvhAoGAJP/s3DdJl7CjhRkkisPm\n3Ta66fk+luV5+rsT33NogWEy67am/toUnueC4YiLD+53PAJR2+YIt2iPqMLJ912n\n5OCUNsmP6zTtTGFcosGFFbXLEmEq4zCzJwVvq/Qj+6F3aLK6u2LNUzLq+GP5AseQ\nn+vIt2unZaFs29oHYixd6hMCgYEAkB1jDbKuww13VQIhzgkugkxJWVlwNHeO8MWI\nB24fD++BnI7i/wFNaHNAKROp44jD1RNs728JL1rCfil9y6geVlLVgrPeLx/athAJ\nL0VuoPZ0cusG/R5Vp5s8h/4QBqT5nH8CrPfM2EqLysiF1LlfKwWAenWXECeYh78k\nV50u2QECgYEAy4a48XYDFY4UTJz2WIrpVYLDMS73l37SUDxXeb1B+WquG3RyXMcM\nlS2EjRH182LK/zGheh6anArGL6zyknq0Lb/+kk9riaMkUTjZcnez7lzy9+3NFyAN\nve49VUP5vOd2emlYZiDsoPKXFmlRuOc+rCkgrJcydvF9obF4DXgyC+A=\n-----END RSA PRIVATE KEY-----\n"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "local_file",
      "name": "cert_public_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": null,
            "content_base64": null,
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "modules/ecs-cluster/tmp/certs/certificate.public.key",
            "id": "f914dafbbb0093361000b5df8696677efb0a4a38",
            "sensitive_content": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsV+HXKjx+WhM1CkCyQbK\nQR5zySO01xDPo7nPMUCgyAs0FAO0J1jrC+9Vb0TUdfjvl2N8yyJZ3Cv23JfxJcR8\na6rg6J1eBcg5rmgXyHUZg1+SCyfDj8NQs6f2MVcUEl5kd0g2a1K9jLb8jykALS/3\nHzI3R4sgl0U44b3CvC/jSqXYpx9L9B/WWSDtaYe8pBo67MWvKwCbtWuCncf9txvz\nnDnkL0/nAFVbUnLK/wjTdYAH6zNScdgoGD+733dxLCEN8bdzGItjf3EiL4j9CTww\nMZwvhaXKQ2YAreNH3kgZXb+WK1SRih7w1Xzd6f3QUamgzd0sd3giN5fkXFn9z7w8\nrwIDAQAB\n-----END PUBLIC KEY-----\n"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert"
          ]
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "local_file",
      "name": "iot_cert_pem",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": null,
            "content_base64": null,
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "modules/ecs-cluster/tmp/certs/certificate.cert.pem",
            "id": "ae61ab57dc874bd500a849a83604f2bb6d265922",
            "sensitive_content": "-----BEGIN CERTIFICATE-----\nMIIDWTCCAkGgAwIBAgIUID2SJ8q6kar/lLvQ+N9H5VJ+MkgwDQYJKoZIhvcNAQEL\nBQAwTTFLMEkGA1UECwxCQW1hem9uIFdlYiBTZXJ2aWNlcyBPPUFtYXpvbi5jb20g\nSW5jLiBMPVNlYXR0bGUgU1Q9V2FzaGluZ3RvbiBDPVVTMB4XDTIwMDgxODE2NDAx\nM1oXDTQ5MTIzMTIzNTk1OVowHjEcMBoGA1UEAwwTQVdTIElvVCBDZXJ0aWZpY2F0\nZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALFfh1yo8floTNQpAskG\nykEec8kjtNcQz6O5zzFAoMgLNBQDtCdY6wvvVW9E1HX475djfMsiWdwr9tyX8SXE\nfGuq4OidXgXIOa5oF8h1GYNfkgsnw4/DULOn9jFXFBJeZHdINmtSvYy2/I8pAC0v\n9x8yN0eLIJdFOOG9wrwv40ql2KcfS/Qf1lkg7WmHvKQaOuzFrysAm7Vrgp3H/bcb\n85w55C9P5wBVW1Jyyv8I03WAB+szUnHYKBg/u993cSwhDfG3cxiLY39xIi+I/Qk8\nMDGcL4WlykNmAK3jR95IGV2/litUkYoe8NV83en90FGpoM3dLHd4IjeX5FxZ/c+8\nPK8CAwEAAaNgMF4wHwYDVR0jBBgwFoAUVIR8IPUxDgSqKKX5+s0uAvbMeE4wHQYD\nVR0OBBYEFIK2T/zFzAweoLKvS+52mWAwRM7dMAwGA1UdEwEB/wQCMAAwDgYDVR0P\nAQH/BAQDAgeAMA0GCSqGSIb3DQEBCwUAA4IBAQCbUJa55OeIn/y8gQWNTpUQTO9+\nTEXo8ZCqe29xRKKhbghL2BLDee1fYa1hNjqa8LcKfaVOD+Uj0aWBIK/bqM0H1I82\ns4RluFta561fsCayP8gqokAd45yfBA/IVtAzhxStYQAmdQCQbVqvgrOepS4b4A5Q\nt+5k5DyHvc/++oJB+NO0/ZTKceBok7Ggj/U9ijWm40bf6qsMRjAMWI7MX35fY6xp\ncfPnFlXWgRjcIJ2hLAZDUkCnOOf2JDZRwq0XXwwh9HEXyKQMuXjeQI40EMIcWiNc\nj4Wp0oLJdjD2i60C62XDHA90CKHeBVkmkvDno7wv/DBsuZ8SNehGGxiE4/iB\n-----END CERTIFICATE-----\n"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs-cluster.aws_iot_certificate.cert"
          ]
        }
      ]
    },
    {
      "module": "module.measurements-crawler",
      "mode": "managed",
      "type": "null_resource",
      "name": "crawler",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "510421132032975207",
            "triggers": {
              "aws_region": "us-east-1",
              "crawler_name": "aiouti-measurements-crawler",
              "module": "modules/measurements-crawler"
            }
          }
        }
      ]
    },
    {
      "module": "module.glue-crawlers",
      "mode": "managed",
      "type": "null_resource",
      "name": "crawler",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "8693035292469896660",
            "triggers": {
              "aws_region": "us-east-1",
              "crawler_name": "aiouti-crawler",
              "module": "modules/glue-crawlers"
            }
          }
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "template_file",
      "name": "device_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "ea08ca74f1543741ed6d9d3ad01bc003b4a31f3aef535d6e5fb4e1046883d571",
            "rendered": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n      {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n          \"s3:GetObject\",\n          \"s3:PutObject\"\n        ],\n        \"Resource\": [\n          \"arn:aws:s3:::aiouti-lf/certs*\"\n        ]\n      },\n      {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n          \"logs:CreateLogGroup\",\n          \"logs:CreateLogStream\",\n          \"logs:DescribeLogGroups\",\n          \"logs:DescribeLogStreams\",\n          \"logs:PutLogEvents\",\n          \"logs:GetLogEvents\",\n          \"logs:FilterLogEvents\"\n        ],\n        \"Resource\": \"arn:aws:logs:*:*:*\"\n      }\n    ]\n}\n",
            "template": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n      {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n          \"s3:GetObject\",\n          \"s3:PutObject\"\n        ],\n        \"Resource\": [\n          \"arn:aws:s3:::aiouti-lf/certs*\"\n        ]\n      },\n      {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n          \"logs:CreateLogGroup\",\n          \"logs:CreateLogStream\",\n          \"logs:DescribeLogGroups\",\n          \"logs:DescribeLogStreams\",\n          \"logs:PutLogEvents\",\n          \"logs:GetLogEvents\",\n          \"logs:FilterLogEvents\"\n        ],\n        \"Resource\": \"arn:aws:logs:*:*:*\"\n      }\n    ]\n}\n",
            "vars": null
          }
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "template_file",
      "name": "ecs_service_role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "886bc59c92859f7d8d417d4f0c5595d77531cb27d30db668ad6c6330d544a544",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::aiouti-lf/certs*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\",\n        \"logs:GetLogEvents\",\n        \"logs:FilterLogEvents\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}\n",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::aiouti-lf/certs*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\",\n        \"logs:GetLogEvents\",\n        \"logs:FilterLogEvents\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}\n",
            "vars": {
              "s3_bucket_name": "aiouti-lf"
            }
          }
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "template_file",
      "name": "registry_task",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "cf6594d638278acf563228af22fd09fd4163b12a4147dd895789828682e5e5ab",
            "rendered": "[\n    {\n      \"name\": \"device\",\n      \"image\": \"pablojulianperalta/aiouti-device:1.8\",\n      \"cpu\": 1024,\n      \"memory\": 512,\n      \"entryPoint\": [],\n      \"environment\": [\n        {\n          \"name\": \"IOT_URI\",\n          \"value\": \"\"\n        }\n      ],\n      \"mountPoints\": [\n        {\n          \"sourceVolume\": \"certificatesvol\",\n          \"containerPath\": \"/usr/src/app/cert\",\n          \"readOnly\": true\n        }\n      ],\n      \"logConfiguration\": {\n        \"logDriver\": \"awslogs\",\n        \"options\": {\n          \"awslogs-region\": \"us-east-1\",\n          \"awslogs-group\": \"aiouti-device\",\n          \"awslogs-stream-prefix\": \"aiouti-ecs\"\n        }\n      },\n      \"volumesFrom\": [],\n      \"links\": [],\n      \"essential\": true\n    }\n]\n",
            "template": "[\n    {\n      \"name\": \"device\",\n      \"image\": \"${registry_docker_image}\",\n      \"cpu\": 1024,\n      \"memory\": 512,\n      \"entryPoint\": [],\n      \"environment\": [\n        {\n          \"name\": \"IOT_URI\",\n          \"value\": \"\"\n        }\n      ],\n      \"mountPoints\": [\n        {\n          \"sourceVolume\": \"certificatesvol\",\n          \"containerPath\": \"/usr/src/app/cert\",\n          \"readOnly\": true\n        }\n      ],\n      \"logConfiguration\": {\n        \"logDriver\": \"awslogs\",\n        \"options\": {\n          \"awslogs-region\": \"us-east-1\",\n          \"awslogs-group\": \"aiouti-device\",\n          \"awslogs-stream-prefix\": \"aiouti-ecs\"\n        }\n      },\n      \"volumesFrom\": [],\n      \"links\": [],\n      \"essential\": true\n    }\n]\n",
            "vars": {
              "aiouti_iot_core_uri": "a4pefh4s7d44l-ats.iot.us-east-1.amazonaws.com",
              "registry_docker_image": "pablojulianperalta/aiouti-device:1.8"
            }
          }
        }
      ]
    },
    {
      "module": "module.ecs-cluster",
      "mode": "managed",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "dea4069ac21a548bcba82bacc3865278e56da013eae85b69d257f9dd87a3f2c5",
            "rendered": "#!/bin/bash\n\ncd /home\ncd ec2-user\ncurl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\nunzip awscliv2.zip\nyum -y install unzip\nunzip awscliv2.zip\nsudo ./aws/install\nyum -y install wget\n\nmkdir cert\ncd cert\naws s3 cp s3://aiouti-lf/certs/certificate.cert.pem certificate.cert.pem\naws s3 cp s3://aiouti-lf/certs/certificate.public.key certificate.public.key\naws s3 cp s3://aiouti-lf/certs/certificate.private.key certificate.private.key\nwget https://www.amazontrust.com/repository/AmazonRootCA1.pem -o certificate.root.pem\n\n# ECS config\n{\n  echo \"ECS_CLUSTER=aiouti-cluster\"\n} \u003e\u003e /etc/ecs/ecs.config\n\nstart ecs\n\necho \"Done\"\n",
            "template": "#!/bin/bash\n\ncd /home\ncd ec2-user\ncurl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\nunzip awscliv2.zip\nyum -y install unzip\nunzip awscliv2.zip\nsudo ./aws/install\nyum -y install wget\n\nmkdir cert\ncd cert\naws s3 cp s3://aiouti-lf/certs/certificate.cert.pem certificate.cert.pem\naws s3 cp s3://aiouti-lf/certs/certificate.public.key certificate.public.key\naws s3 cp s3://aiouti-lf/certs/certificate.private.key certificate.private.key\nwget https://www.amazontrust.com/repository/AmazonRootCA1.pem -o certificate.root.pem\n\n# ECS config\n{\n  echo \"ECS_CLUSTER=${cluster_name}\"\n} \u003e\u003e /etc/ecs/ecs.config\n\nstart ecs\n\necho \"Done\"\n",
            "vars": {
              "cluster_name": "aiouti-cluster"
            }
          }
        }
      ]
    }
  ]
}
